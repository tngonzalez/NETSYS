<mat-dialog-content
  class="modal-content"
  style="overflow-y: auto; max-height: auto"
>
  <div
    tabindex="-1"
    class="fixed inset-0 z-50 flex items-center justify-center bg-gray-500 bg-opacity-75 modal-body"
    [class.hidden]="!isVisible"
  >
    <div class="relative p-6 w-full max-w-[90%] max-h-full">
      <div class="relative bg-white rounded-lg shadow-lg">
        <!-- Cerrar Modal -->
        <button
          type="button"
          (click)="closeModal()"
          class="absolute top-3 right-3 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 flex justify-center items-center"
          data-modal-hide="update-modal"
        >
          <svg
            class="w-4 h-4"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 14"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M1 1l6 6m0 0l6 6m-6-6L1 13m6-6L13 1"
            />
          </svg>
          <span class="sr-only">Cerrar modal</span>
        </button>

        <!--Header-->
        <div class="text-center p-6 border-b border-gray-200">
          <h3 class="text-xl font-semibold text-gray-800">Crear Servicio</h3>
        </div>

        <!-- Formulario -->
        <div class="p-6 space-y-4">

          <form [formGroup]="ftthForm" novalidate class="flex flex-col gap-4"> 
            <!-- 2  Columns-->
            <div class="grid gap-6 mb-6 md:grid-cols-2">
                  <!--Cliente - Crear-->
                    <div [class.hidden]="!createVisible">
                      <h4><strong>Nuevo Cliente</strong></h4>

                      <div>
                          <label for="nombre" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre Completo</label>
                          <input type="text" id="nombre" name="nombre" formControlName="nombre" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el nombre completo" required />
                      </div>

                      <div>
                          <label for="numero" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Identificador</label>
                          <input type="text" id="numero" name="numero" formControlName="numero" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número del cliente" required />
                      </div>

                    </div>
                    <div [class.hidden]="!createVisible">

                      <h4><strong>Condominio</strong></h4>

                      <div>
                        <label for="zona" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre de la zona de residencia</label>
                        <input type="text" id="zona" name="zona" formControlName="zona" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese la zona de residencia" required />
                      </div>

                      <div>
                        <label for="numCasa" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de casa</label>
                        <input type="text" id="numCasa" name="numCasa" formControlName="numCasa" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de casa" required />
                      </div>
                      
                    </div>

                    <div *ngIf="btnVisible">
                      <button
                        class="text-black bg-[#909B9F] focus:ring-4 focus:outline-none focus:ring-red-300 font-bold rounded-lg text-sm inline-flex items-center px-2 py-2.5 text-center drop-shadow-sm hover:bg-[#112346] hover:text-white"
                        (click)="searchCliente()"
                      >
                        Buscar Cliente
                      </button>
                    </div>

                    <div *ngIf="tableVisiblie">
                      <h4><strong>Clientes con servicios previos</strong></h4>

                      <div class="flex w-48 mx-2">
                        <div class="relative">
                          <div
                            class="absolute inset-y-0 start-0 flex items-center ps-3 pointer-events-none"
                          >
                            <svg
                              class="w-4 h-4 text-indigo-600"
                              aria-hidden="true"
                              xmlns="http://www.w3.org/2000/svg"
                              fill="none"
                              viewBox="0 0 20 20"
                            >
                              <path
                                stroke="currentColor"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                stroke-width="2"
                                d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z"
                              />
                            </svg>
                          </div>
                          <input
                            (change)="numberChange($event)"
                            type="search"
                            id="default-search"
                            class="block w-full h-11 p p-4 ps-8 text-sm text-gray-900 border border-gray-300 rounded-lg bg-white focus:ring-indigo-600 focus:border-indigo-600"
                            placeholder="Buscar por cliente"
                            #searchInput
                          />
                        </div>
                      </div>
                      <!-- ========== Table Número Cliente  ========== -->
                      <div>
                        <table mat-table [dataSource]="dataSource" matSort>
                          <ng-container matColumnDef="numero">
                            <th
                              scope="col"
                              class="text-s text-black colcolor"
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                            >
                              Identificador
                            </th>
                            <td scope="row" mat-cell *matCellDef="let row">
                              {{ row.numero }}
                            </td>
                          </ng-container>

                          <ng-container matColumnDef="accion">
                            <th
                              scope="col"
                              class="text-s text-black colcolor"
                              mat-header-cell
                              *matHeaderCellDef
                              mat-sort-header
                              style="margin: 0 auto"
                            >
                              Seleccionar
                            </th>

                            <td mat-cell *matCellDef="let row">
                              <div class="flex gap-5">
                                <button
                                  mat-mini-fab
                                  class="bt-editar"
                                  matTooltip="Editar"
                                  aria-label="Editar"
                                ></button>
                              </div>
                            </td>
                          </ng-container>
                          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                          <tr
                            mat-row
                            *matRowDef="let row; columns: displayedColumns"
                          ></tr>
                        </table>
                      </div>
                    </div>
                    <span class="mx-40 example-spacer"></span>

                    <!--Datos Servicio: Tipo + Caja + OS-->
                    <div>
                      <h4><strong>Datos del servicio</strong></h4>
                      <div>
                          <label for="servicios" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Tipo de Cliente</label>
                          <select id="idTipo" formControlName="idTipo" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                          (change)="onServiceChange($event)">

                            <option value="" disabled selected>Servicios</option>
                            <option *ngFor="let srv of servicios" value="srv.id">
                              {{srv.nombre}}
                            </option>
                          </select>
                      </div>

                      <div>
                        <label for="numOS" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de orden de servicio</label>
                        <input type="text" id="numOS" name="numOS" formControlName="numOS" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de orden de servicio" required />
                      </div>

                    </div>
                    <div class="py-5">
                      <label for="cajaDerivada" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de caja derivada</label>
                      <input type="text" id="cajaDerivada" name="cajaDerivada" formControlName="cajaDerivada" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de caja derivada" required />
                    </div>

                    <!--Router + OLT: Subred + NAT + nombreZona-->


                    <div>
                      <h4><strong>Datos del OLT</strong></h4>

                      <div>
                        <label for="olts" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">OLT Disponibles</label>
                        <select id="idOLT" formControlName="idOLT" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                        (change)="onStatusChange($event)">

                          <option value="" disabled selected>Disponibles</option>
                          <option *ngFor="let olt of olts" value="olt.idOLT">
                            {{olt.combo}}
                          </option>
                        </select>
                      </div>

                      <div>
                        <label for="nombreZona" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre de la zona</label>
                        <input type="text" id="nombreZona" name="nombreZona" formControlName="nombreZona" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese la zona de instalación" required />
                      </div> 

                      <div>
                        <label for="puertoNAT" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Puerto NAT</label>
                        <input type="text" id="puertoNAT" name="puertoNAT" formControlName="puertoNAT" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el puerto NAT" required />
                      </div> 

    
                    </div>



                    <!--ONT-->
                    <div>
                      <h4><strong>ONT</strong></h4>

                      <div>
                        <label for="potenciaRecepcion" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Potencia de recepción</label>
                        <input type="text" id="potenciaRecepcion" name="potenciaRecepcion" formControlName="potenciaRecepcion" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese la potencia de recepción" required />
                      </div> 
    
                      <div>
                          <label for="numActivo" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de activo</label>
                          <input type="text" id="numActivo" name="numActivo" formControlName="numActivo" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de activo" required />
                      </div>
    
                    </div>
                    <div class="py-5">                 
                      <div>
                        <label for="macAdress" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">MacAddress</label>
                        <input type="text" id="macAdress" name="macAdress" formControlName="macAdress" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de macaddress" required />
                      </div>
    
                      <div>
                        <label for="numSN" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Número de SN</label>
                        <input type="text" id="numSN" name="numSN" formControlName="numSN" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el número de SN" required />
                      </div>
                    </div>

                    <!--BW + BW_KBPS-->
                    <div>
                      <h4><strong>Anchos de banda</strong></h4>

                      <div>
                          <label for="bw" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Anchos de banda contratados</label>
                          <select id="idBW" formControlName="idBW" class="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                          (change)="onBWChange($event)">

                            <option value="" disabled selected>Disponibles</option>
                            <option *ngFor="let lbw of bw" value="lbw.id">
                              {{lbw.bw}}
                            </option>
                          </select>
                      </div>

                    </div>
                    <div class="py-5">
                      <label for="kbps" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Ancho de banda por segundo</label>
                      <input type="text" id="kbps" name="kbps" formControlName="kbps" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el ancho de bando por segundo" required />
                    </div>




                    <!--Adicional-->
                    <div>
                      <div>
                        <label for="agente" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre del agente encargado</label>
                        <input type="text" id="agente" name="agente" formControlName="agente" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese el nombre del agente encargado" required />
                      </div>

                      <div>
                        <label for="comentario" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Comentario adicional</label>
                        <textarea id="comentario"  name="comentario" formControlName="comentario" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Ingrese su comentario" required></textarea>
                      </div>
                    </div>
                      

                <div>
                    <label for="company" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Company</label>
                    <input type="text" id="company" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Flowbite" required />
                </div>  
                <div>
                    <label for="phone" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Phone number</label>
                    <input type="tel" id="phone" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="123-45-678" pattern="[0-9]{3}-[0-9]{2}-[0-9]{3}" required />
                </div>
                <div>
                    <label for="website" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Website URL</label>
                    <input type="url" id="website" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="flowbite.com" required />
                </div>
                <div>
                    <label for="visitors" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Unique visitors (per month)</label>
                    <input type="number" id="visitors" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="" required />
                </div>
            </div>
            
            <div class="mb-6">
                <label for="email" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Email address</label>
                <input type="email" id="email" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="john.doe@company.com" required />
            </div> 
            <div class="mb-6">
                <label for="password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Password</label>
                <input type="password" id="password" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="•••••••••" required />
            </div> 
            <div class="mb-6">
                <label for="confirm_password" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Confirm password</label>
                <input type="password" id="confirm_password" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="•••••••••" required />
            </div> 
            <div class="flex items-start mb-6">
                <div class="flex items-center h-5">
                <input id="remember" type="checkbox" value="" class="w-4 h-4 border border-gray-300 rounded bg-gray-50 focus:ring-3 focus:ring-blue-300 dark:bg-gray-700 dark:border-gray-600 dark:focus:ring-blue-600 dark:ring-offset-gray-800" required />
                </div>
                <label for="remember" class="ms-2 text-sm font-medium text-gray-900 dark:text-gray-300">I agree with the <a href="#" class="text-blue-600 hover:underline dark:text-blue-500">terms and conditions</a>.</label>
            </div>
            <div>
              

            </div>
            <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Submit</button>
        </form>
        
        </div>
      </div>
    </div>
  </div>
</mat-dialog-content>
